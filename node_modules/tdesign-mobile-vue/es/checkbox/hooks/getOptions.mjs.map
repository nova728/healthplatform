{"version":3,"file":"getOptions.mjs","sources":["../../../src/checkbox/hooks/getOptions.ts"],"sourcesContent":["import { VNode, Ref, ref, watch, onMounted, Slots, toRefs } from 'vue';\n\nimport { CheckboxOption, CheckboxOptionObj, TdCheckboxGroupProps } from '../type';\nimport { useChildSlots } from '../../shared';\n\nexport const getOptionListBySlots = (nodes: VNode[]) => {\n  const arr: Array<CheckboxOptionObj> = [];\n  nodes?.forEach((node) => {\n    const option = node.props as CheckboxOptionObj;\n    if (option?.['check-all'] === '' || option?.['check-all'] === true) {\n      option.checkAll = true;\n    }\n    option && arr.push(option);\n  });\n  return arr;\n};\n\nexport const getOptions = (props: any, slots: Slots) => {\n  const { options } = toRefs(props);\n  const optionList = ref<CheckboxOptionObj[]>([]);\n\n  watch(\n    options,\n    (options) => {\n      if (!options) return [];\n      optionList.value = options.map((item: CheckboxOption) => {\n        let r: CheckboxOptionObj = {};\n        if (typeof item !== 'object') {\n          r = { label: String(item), value: item };\n        } else {\n          r = { ...item };\n          r.disabled = r.disabled === undefined ? props.disabled : r.disabled;\n        }\n        return r;\n      });\n    },\n    { immediate: true },\n  );\n\n  onMounted(() => {\n    const nodes = slots.default && slots.default();\n    if (nodes !== undefined) {\n      optionList.value = getOptionListBySlots(useChildSlots('t-checkbox'));\n    }\n  });\n\n  return optionList;\n};\n"],"names":["getOptionListBySlots","nodes","arr","forEach","node","option","props","checkAll","push","getOptions","slots","_toRefs","toRefs","options","optionList","ref","watch","value","map","item","r","_typeof","label","String","_objectSpread","disabled","immediate","onMounted","default","useChildSlots"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAKaA,oBAAA,GAAuB,SAAvBA,oBAAAA,CAAwBC,KAAmB,EAAA;EACtD,IAAMC,MAAgC,EAAC,CAAA;EAChCD,KAAA,KAAA,IAAA,IAAAA,KAAA,KAAAA,KAAAA,CAAAA,IAAAA,KAAA,CAAAE,OAAA,CAAQ,UAACC,IAAS,EAAA;AACvB,IAAA,IAAMC,SAASD,IAAK,CAAAE,KAAA,CAAA;IACpB,IAAI,CAAAD,MAAS,KAATA,IAAAA,IAAAA,MAAS,uBAATA,MAAS,CAAA,WAAA,CAAA,MAAiB,EAAM,IAAA,CAAAA,MAAA,KAAAA,IAAAA,IAAAA,MAAA,KAAAA,KAAAA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,MAAA,CAAS,kBAAiB,IAAM,EAAA;MAClEA,MAAA,CAAOE,QAAW,GAAA,IAAA,CAAA;AACpB,KAAA;AACUF,IAAAA,MAAA,IAAAH,GAAA,CAAIM,KAAKH,MAAM,CAAA,CAAA;AAC3B,GAAC,CAAA,CAAA;AACM,EAAA,OAAAH,GAAA,CAAA;AACT,EAAA;AAEa,IAAAO,UAAA,GAAa,SAAbA,UAAAA,CAAcH,KAAA,EAAYI,KAAiB,EAAA;AACtD,EAAA,IAAAC,OAAA,GAAoBC,MAAA,CAAON,KAAK,CAAA;IAAxBO,OAAA,GAAAF,OAAA,CAAAE,OAAA,CAAA;AACF,EAAA,IAAAC,UAAA,GAAaC,GAAyB,CAAA,EAAE,CAAA,CAAA;AAE9CC,EAAAA,KAAA,CACEH,OAAA,EACA,UAACA,QAAY,EAAA;AACX,IAAA,IAAI,CAACA,QAAAA,EAAS,OAAO,EAAC,CAAA;IACtBC,UAAA,CAAWG,KAAQJ,GAAAA,QAAAA,CAAQK,GAAI,CAAA,UAACC,IAAyB,EAAA;MACvD,IAAIC,IAAuB,EAAC,CAAA;AACxB,MAAA,IAAAC,OAAA,CAAOF,UAAS,QAAU,EAAA;AAC5BC,QAAAA,CAAA,GAAI;AAAEE,UAAAA,KAAO,EAAAC,MAAA,CAAOJ,IAAI,CAAA;AAAGF,UAAAA,OAAOE,IAAAA;SAAK,CAAA;AACzC,OAAO,MAAA;AACDC,QAAAA,CAAA,GAAAI,aAAA,CAAKL,EAAAA,EAAAA,IAAK,CAAA,CAAA;AACdC,QAAAA,CAAA,CAAEK,WAAWL,CAAE,CAAAK,QAAA,KAAa,KAAY,CAAA,GAAAnB,KAAA,CAAMmB,WAAWL,CAAE,CAAAK,QAAA,CAAA;AAC7D,OAAA;AACO,MAAA,OAAAL,CAAA,CAAA;AACT,KAAC,CAAA,CAAA;AACH,GAAA,EACA;AAAEM,IAAAA,WAAW,IAAA;AAAK,GACpB,CAAA,CAAA;AAEAC,EAAAA,SAAA,CAAU,YAAM;IACd,IAAM1B,KAAQ,GAAAS,KAAA,CAAMkB,OAAW,IAAAlB,KAAA,CAAMkB,OAAQ,EAAA,CAAA;AAC7C,IAAA,IAAI3B,UAAU,KAAW,CAAA,EAAA;MACvBa,UAAA,CAAWG,KAAQ,GAAAjB,oBAAA,CAAqB6B,aAAc,CAAA,YAAY,CAAC,CAAA,CAAA;AACrE,KAAA;AACF,GAAC,CAAA,CAAA;AAEM,EAAA,OAAAf,UAAA,CAAA;AACT;;;;"}