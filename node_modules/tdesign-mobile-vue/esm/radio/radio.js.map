{"version":3,"file":"radio.js","sources":["../../src/radio/radio.tsx"],"sourcesContent":["import { inject, computed, defineComponent, Ref } from 'vue';\nimport { CheckIcon, CheckCircleFilledIcon } from 'tdesign-icons-vue-next';\nimport { useDefault } from '../shared';\nimport config from '../config';\nimport props from './props';\nimport { TdRadioGroupProps, TdRadioProps } from './type';\nimport { useFormDisabled } from '../form/hooks';\nimport { usePrefixClass } from '../hooks/useClass';\nimport { useContent, useTNodeJSX } from '../hooks/tnode';\n\nconst { prefix } = config;\n\nexport default defineComponent({\n  name: `${prefix}-radio`,\n  props,\n  emits: ['update:checked', 'update:modelValue', 'change'],\n  setup(props, context) {\n    const renderTNodeContent = useContent();\n    const renderTNodeJSX = useTNodeJSX();\n    const radioClass = usePrefixClass('radio');\n\n    const [innerChecked, setInnerChecked] = useDefault<boolean, TdRadioProps>(props, context.emit, 'checked', 'change');\n\n    const rootGroupProps = inject('rootGroupProps', {}) as TdRadioGroupProps;\n    const rootGroupValue = inject('rootGroupValue', {}) as Ref;\n    const rootGroupChange = inject('rootGroupChange', undefined);\n\n    // extend radioGroup disabled props\n    const groupDisabled = computed(() => rootGroupProps?.disabled);\n    const isDisabled = useFormDisabled(groupDisabled);\n\n    const radioChecked = computed(() => innerChecked.value || (props.value && props.value === rootGroupValue?.value));\n\n    const finalBorderless = computed(() => {\n      if (props.borderless == null && 'borderless' in rootGroupProps) return rootGroupProps.borderless;\n      return props.borderless;\n    });\n    const finalPlacement = computed(() => {\n      if (props.placement == null && 'placement' in rootGroupProps) return rootGroupProps.placement;\n      return props.placement || 'left';\n    });\n\n    const finalAllowUncheck = computed(() => Boolean(props.allowUncheck || rootGroupProps?.allowUncheck));\n\n    // input props attribute\n    const inputProps = computed(() => ({\n      name: rootGroupProps.name || props.name,\n      checked: radioChecked.value,\n      disabled: isDisabled.value,\n      readonly: props.readonly,\n      value: props.value,\n    }));\n\n    const iconContent = computed(() => {\n      if (props.icon?.length === 2) {\n        const iconIndex = radioChecked.value ? 0 : 1;\n        return props.icon[iconIndex];\n      }\n      return null;\n    });\n\n    const radioClasses = computed(() => [\n      `${radioClass.value}`,\n      `${radioClass.value}--${finalPlacement.value}`,\n      {\n        [`${radioClass.value}--block`]: props.block,\n      },\n    ]);\n\n    const titleClasses = computed(() => [\n      `${radioClass.value}__title`,\n      {\n        [`${radioClass.value}__title--disabled`]: isDisabled.value,\n      },\n    ]);\n\n    const iconClass = computed(() => [\n      `${radioClass.value}__icon`,\n      `${radioClass.value}__icon--${finalPlacement.value}`,\n      {\n        [`${radioClass.value}__icon--checked`]: radioChecked.value,\n        [`${radioClass.value}__icon--disabled`]: isDisabled.value,\n      },\n    ]);\n\n    const radioContentChange = (e: Event) => {\n      e.stopPropagation();\n      if (props.contentDisabled) {\n        return;\n      }\n      radioOrgChange(e);\n    };\n\n    const radioOrgChange = (e: Event) => {\n      if (isDisabled.value || props.readonly) {\n        return;\n      }\n      if (rootGroupChange) {\n        const value = finalAllowUncheck.value && radioChecked.value ? undefined : props.value;\n        rootGroupChange(value, { e, name: props.name });\n      } else {\n        const value = finalAllowUncheck.value ? !radioChecked.value : true;\n        setInnerChecked(value, { e });\n      }\n    };\n\n    const readerIcon = () => {\n      if (radioChecked.value) {\n        if (props.icon === 'circle') {\n          return <CheckCircleFilledIcon class={`${radioClass.value}__icon-wrap`} />;\n        }\n        if (props.icon === 'line') {\n          return <CheckIcon class={`${radioClass.value}__icon-wrap`} />;\n        }\n        if (props.icon === 'dot') {\n          return (\n            <div\n              class={[\n                `${radioClass.value}__icon-${props.icon}`,\n                { [`${radioClass.value}__icon-${props.icon}--disabled`]: isDisabled.value },\n              ]}\n            />\n          );\n        }\n      } else {\n        if (props.icon === 'circle' || props.icon === 'dot') {\n          return (\n            <div\n              class={[\n                `${radioClass.value}__icon-circle`,\n                { [`${radioClass.value}__icon-circle--disabled`]: isDisabled.value },\n              ]}\n            />\n          );\n        }\n        if (props.icon === 'line') {\n          return <div class=\"placeholder\" />;\n        }\n      }\n    };\n\n    return () => {\n      const label = renderTNodeContent('default', 'label');\n      const content = renderTNodeJSX('content');\n      return (\n        <div class={radioClasses.value} onClick={radioOrgChange}>\n          <input type=\"radio\" class={`${radioClass.value}__original`} {...inputProps.value} />\n          <div class={iconClass.value}>\n            {readerIcon()}\n            {iconContent.value}\n          </div>\n          <div class={`${radioClass.value}__content`} onClick={radioContentChange}>\n            {label && (\n              <span class={titleClasses.value} style={`-webkit-line-clamp: ${props.maxLabelRow}`}>\n                {label}\n              </span>\n            )}\n            {content && (\n              <div\n                class={[`${radioClass.value}__description`, { [`${radioClass.value}__description`]: isDisabled.value }]}\n                style={`-webkit-line-clamp: ${props.maxContentRow}`}\n              >\n                {content}\n              </div>\n            )}\n          </div>\n          {!finalBorderless.value && (\n            <div class={`${radioClass.value}__border ${radioClass.value}__border--${finalPlacement.value}`} />\n          )}\n        </div>\n      );\n    };\n  },\n});\n"],"names":["prefix","config","defineComponent","name","props","emits","setup","context","renderTNodeContent","useContent","renderTNodeJSX","useTNodeJSX","radioClass","usePrefixClass","_useDefault","useDefault","emit","_useDefault2","_slicedToArray","innerChecked","setInnerChecked","rootGroupProps","inject","rootGroupValue","rootGroupChange","groupDisabled","computed","disabled","isDisabled","useFormDisabled","radioChecked","value","finalBorderless","borderless","finalPlacement","placement","finalAllowUncheck","Boolean","allowUncheck","inputProps","checked","readonly","iconContent","_props2$icon","icon","length","iconIndex","radioClasses","concat","_defineProperty","block","titleClasses","iconClass","radioContentChange","e","stopPropagation","contentDisabled","radioOrgChange","readerIcon","_createVNode","CheckCircleFilledIcon","CheckIcon","label","content","_mergeProps","maxLabelRow","maxContentRow"],"mappings":"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"}