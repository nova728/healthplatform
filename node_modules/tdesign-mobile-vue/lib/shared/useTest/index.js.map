{"version":3,"file":"index.js","sources":["../../../src/shared/useTest/index.ts"],"sourcesContent":["import { sleep } from '../util';\n\n/**\n * 测试相关的工具方法\n */\nexport function useTestUtils() {\n  const makeScroll = async (dom: Element, name: 'scrollTop' | 'scrollLeft', offset: number) => {\n    const eventTarget = dom === document.documentElement ? window : dom;\n    dom[name] = offset;\n    const evt = new CustomEvent('scroll', {\n      detail: {\n        target: {\n          [name]: offset,\n        },\n      },\n    });\n    eventTarget.dispatchEvent(evt);\n    // must use setTimeout instead of nextTick to wait dom change\n    await sleep(0);\n  };\n\n  return { makeScroll, sleep };\n}\n\n/**\n * 测试相关的vitest方法\n */\nexport function useVitest(vi: typeof import('vitest')['vitest']) {\n  const getBoundingClientRect = (dom: Element) => vi.spyOn(dom, 'getBoundingClientRect');\n\n  return { getBoundingClientRect };\n}\n"],"names":["useTestUtils","makeScroll","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dom","name","offset","eventTarget","evt","wrap","_callee$","_context","prev","next","document","documentElement","window","CustomEvent","detail","target","_defineProperty","dispatchEvent","sleep","stop","_x","_x2","_x3","apply","arguments","useVitest","vi","getBoundingClientRect","spyOn"],"mappings":";;;;;;;;;;;;;;AAKO,SAASA,YAAeA,GAAA;AAC7B,EAAA,IAAMC,UAAa,gBAAA,YAAA;AAAA,IAAA,IAAAC,IAAA,GAAAC,iBAAA,cAAAC,mBAAA,CAAAC,IAAA,CAAA,SAAAC,OAAOC,CAAAA,GAAc,EAAAC,IAAA,EAAkCC,MAAmB,EAAA;MAAA,IAAAC,WAAA,EAAAC,GAAA,CAAA;AAAA,MAAA,OAAAP,mBAAA,CAAAQ,IAAA,CAAA,SAAAC,SAAAC,QAAA,EAAA;AAAA,QAAA,OAAA,CAAA,EAAA,QAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;AAAA,UAAA,KAAA,CAAA;YACrFN,WAAc,GAAAH,GAAA,KAAQU,QAAS,CAAAC,eAAA,GAAkBC,MAAS,GAAAZ,GAAA,CAAA;AAChEA,YAAAA,GAAA,CAAIC,IAAQ,CAAA,GAAAC,MAAA,CAAA;AACNE,YAAAA,GAAA,GAAM,IAAIS,WAAA,CAAY,QAAU,EAAA;AACpCC,cAAAA,MAAQ,EAAA;AACNC,gBAAAA,MAAQ,EAAAC,eAAA,CACLf,EAAAA,EAAAA,IAAO,EAAAC,MAAA,CAAA;AAEZ,eAAA;AACF,aAAC,CAAA,CAAA;AACDC,YAAAA,WAAA,CAAYc,cAAcb,GAAG,CAAA,CAAA;AAAAG,YAAAA,QAAA,CAAAE,IAAA,GAAA,CAAA,CAAA;YAAA,OAEvBS,MAAM,CAAC,CAAA,CAAA;AAAA,UAAA,KAAA,CAAA,CAAA;AAAA,UAAA,KAAA,KAAA;YAAA,OAAAX,QAAA,CAAAY,IAAA,EAAA,CAAA;AAAA,SAAA;AAAA,OAAA,EAAApB,OAAA,CAAA,CAAA;KACf,CAAA,CAAA,CAAA;AAAA,IAAA,OAAA,SAbML,UAAaA,CAAA0B,EAAA,EAAAC,GAAA,EAAAC,GAAA,EAAA;AAAA,MAAA,OAAA3B,IAAA,CAAA4B,KAAA,CAAA,IAAA,EAAAC,SAAA,CAAA,CAAA;AAAA,KAAA,CAAA;GAanB,EAAA,CAAA;EAEO,OAAA;AAAE9B,IAAAA,YAAAA;AAAYwB,IAAAA,KAAM,EAANA,KAAAA;GAAM,CAAA;AAC7B,CAAA;AAKO,SAASO,UAAUC,EAAuC,EAAA;AAC/D,EAAA,IAAMC,wBAAwB,SAAxBA,sBAAyB3B,GAAA,EAAA;AAAA,IAAA,OAAiB0B,EAAG,CAAAE,KAAA,CAAM5B,KAAK,uBAAuB,CAAA,CAAA;AAAA,GAAA,CAAA;EAErF,OAAO;AAAE2B,IAAAA,qBAAsB,EAAtBA,qBAAAA;GAAsB,CAAA;AACjC;;;;"}