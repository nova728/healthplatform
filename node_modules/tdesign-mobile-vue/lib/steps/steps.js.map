{"version":3,"file":"steps.js","sources":["../../src/steps/steps.tsx"],"sourcesContent":["import { provide, defineComponent, reactive, ComponentInternalInstance, computed } from 'vue';\nimport props from './props';\nimport config from '../config';\nimport { TdStepsProps } from './type';\nimport { useDefault } from '../shared';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport { usePrefixClass } from '../hooks/useClass';\n\nconst { prefix } = config;\n\nexport default defineComponent({\n  name: `${prefix}-steps`,\n  props,\n  emits: ['update:current', 'update:modelValue', 'change'],\n  setup(props, context) {\n    const stepsClass = usePrefixClass('steps');\n    const baseClass = computed(() => [\n      stepsClass.value,\n      `${stepsClass.value}--${props.layout}`,\n      `${stepsClass.value}--${props.sequence}`,\n      { [`${stepsClass.value}--readonly`]: props.readonly },\n    ]);\n    const renderTNodeJSX = useTNodeJSX();\n\n    const [current, setCurrent] = useDefault<TdStepsProps['current'], TdStepsProps>(\n      props,\n      context.emit,\n      'current',\n      'change',\n    );\n\n    interface TState {\n      children: ComponentInternalInstance[];\n    }\n\n    const state: TState = reactive({\n      children: [],\n    });\n\n    const relation = (child: ComponentInternalInstance) => {\n      child && state.children.push(child);\n    };\n\n    const removeRelation = (child: ComponentInternalInstance) => {\n      state.children = state.children.filter((item) => item !== child);\n    };\n\n    const onClickItem = (cur: TdStepsProps['current'], prev: TdStepsProps['current'], e: MouseEvent) => {\n      setCurrent(cur, prev, { e });\n    };\n\n    provide('stepsProvide', {\n      ...props,\n      state,\n      current,\n      relation,\n      removeRelation,\n      onClickItem,\n    });\n\n    return () => {\n      const renderContent = renderTNodeJSX('default') || null;\n      return <div class={baseClass.value}>{renderContent}</div>;\n    };\n  },\n});\n"],"names":["prefix","config","defineComponent","name","props","emits","setup","context","stepsClass","usePrefixClass","baseClass","computed","value","concat","layout","sequence","_defineProperty","readonly","renderTNodeJSX","useTNodeJSX","_useDefault","useDefault","emit","_useDefault2","_slicedToArray","current","setCurrent","state","reactive","children","relation","child","push","removeRelation","filter","item","onClickItem","cur","prev","e","provide","_objectSpread","renderContent","_createVNode"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,IAAQA,SAAWC,MAAA,CAAXD;AAER,aAAeE,eAAgB,CAAA;AAC7BC,EAAAA,gBAASH,MAAA,EAAA,QAAA,CAAA;AACTI,EAAAA,KAAA,EAAAA,KAAA;AACAC,EAAAA,KAAO,EAAA,CAAC,gBAAkB,EAAA,mBAAA,EAAqB,QAAQ,CAAA;AACvDC,EAAAA,KAAA,WAAAA,KAAAA,CAAMF,QAAOG,OAAS,EAAA;AACd,IAAA,IAAAC,UAAA,GAAaC,eAAe,OAAO,CAAA,CAAA;IACnC,IAAAC,SAAA,GAAYC,SAAS,YAAA;AAAA,MAAA,OAAM,CAC/BH,UAAW,CAAAI,KAAA,EAAAC,EAAAA,CAAAA,MAAA,CACRL,UAAW,CAAAI,KAAA,EAAA,IAAA,CAAA,CAAAC,MAAA,CAAUT,MAAM,CAAAU,MAAA,CAAA,EAAA,EAAA,CAAAD,MAAA,CAC3BL,UAAW,CAAAI,KAAA,QAAAC,MAAA,CAAUT,MAAM,CAAAW,QAAA,GAAAC,eAAA,CAAA,EAAA,EAAA,EAAA,CAAAH,MAAA,CACxBL,UAAW,CAAAI,KAAA,iBAAoBR,OAAMa,QAAS,CACrD,CAAA,CAAA;KAAA,CAAA,CAAA;AACD,IAAA,IAAMC,iBAAiBC,WAAY,EAAA,CAAA;AAE7B,IAAA,IAAAC,WAAA,GAAwBC,UAAA,CAC5BjB,MAAAA,EACAG,OAAQ,CAAAe,IAAA,EACR,SAAA,EACA,QACF,CAAA;MAAAC,YAAA,GAAAC,cAAA,CAAAJ,WAAA,EAAA,CAAA,CAAA;AALOK,MAAAA,OAAS,GAAAF,YAAA,CAAA,CAAA,CAAA;AAAAG,MAAAA,UAAU,GAAAH,YAAA,CAAA,CAAA,CAAA,CAAA;IAW1B,IAAMI,QAAgBC,QAAS,CAAA;AAC7BC,MAAAA,UAAU,EAAA;AACZ,KAAC,CAAA,CAAA;AAEK,IAAA,IAAAC,QAAA,GAAW,SAAXA,QAAAA,CAAYC,KAAqC,EAAA;MAC5CA,KAAA,IAAAJ,KAAA,CAAME,QAAS,CAAAG,IAAA,CAAKD,KAAK,CAAA,CAAA;KACpC,CAAA;AAEM,IAAA,IAAAE,cAAA,GAAiB,SAAjBA,cAAAA,CAAkBF,KAAqC,EAAA;MAC3DJ,KAAA,CAAME,WAAWF,KAAM,CAAAE,QAAA,CAASK,OAAO,UAACC,IAAA,EAAA;QAAA,OAASA,SAASJ,KAAK,CAAA;OAAA,CAAA,CAAA;KACjE,CAAA;IAEA,IAAMK,WAAc,GAAA,SAAdA,WAAcA,CAACC,GAA8B,EAAAC,IAAA,EAA+BC,CAAkB,EAAA;AAClGb,MAAAA,UAAA,CAAWW,GAAK,EAAAC,IAAA,EAAM;AAAEC,QAAAA,CAAA,EAAAA,CAAAA;AAAE,OAAC,CAAA,CAAA;KAC7B,CAAA;AAEAC,IAAAA,OAAA,CAAQ,cAAgB,EAAAC,aAAA,CAAAA,aAAA,KACnBrC,MAAAA,CAAAA,EAAAA,EAAAA,EAAAA;AACHuB,MAAAA,KAAA,EAAAA,KAAA;AACAF,MAAAA,OAAA,EAAAA,OAAA;AACAK,MAAAA,QAAA,EAAAA,QAAA;AACAG,MAAAA,cAAA,EAAAA,cAAA;AACAG,MAAAA,WAAA,EAAAA,WAAAA;AAAA,KAAA,CACD,CAAA,CAAA;AAED,IAAA,OAAO,YAAM;AACL,MAAA,IAAAM,aAAA,GAAgBxB,cAAe,CAAA,SAAS,CAAK,IAAA,IAAA,CAAA;AACnD,MAAA,OAAAyB,WAAA,CAAA,KAAA,EAAA;AAAA,QAAA,OAAA,EAAmBjC,SAAU,CAAAE,KAAAA;AAAA,OAAA,EAAA,CAAQ8B;KACvC,CAAA;AACF,GAAA;AACF,CAAC,CAAA;;;;"}